{% extends 'base.html' %}

{% block content %}
<style>
.card-link {
    text-decoration: none;
    color: inherit;
    display: block;
    height: 100%;
}
.card-link .card {
    height: 100%;
    cursor: pointer;
    border: 1px solid #dee2e6;
    box-shadow: 0 2px 4px rgba(0,0,0,0.08);
    transition: all 0.3s ease;
}
.card-link:hover .card {
    transform: translateY(-3px);
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    border-color: #0d6efd;
}
.card-link:hover {
    color: inherit;
}
</style>

<div class="row">
    <div class="col-lg-10 mx-auto">
        <div class="text-center mb-4">
            <h1 class="display-5">Welcome to Django Demo</h1>
        </div>
        <!-- __WRISTBAND__: Check if user is logged in via Wristband -->
        {% if is_authenticated %}
            <div class="alert alert-success" role="alert">
                ğŸ‰ Welcome, you're logged into tenant <strong>"{{ tenant_name }}"</strong>!
            </div>
            <div class="alert alert-info border" role="alert">
                <strong>ğŸ’¡ Tip:</strong> This demo showcases multiple auth patterns. Pick the ones that match your Django setup. You don't need to use them all!
            </div>
        {% else %}
            <div class="alert alert-info" role="alert">
                <h5 class="m-0">ğŸ” Please login to try this auth demo.</h5>
            </div>
        {% endif %}

        <div class="row mt-4">
            <div class="col-md-6 mb-2 d-flex flex-column">
                <a href="{% url 'demo_app:classic' %}" class="card-link">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">ğŸŒ Classic Django Views</h5>
                            <p class="card-text">Demonstrates function decorators for API endpoint protection.</p>
                            <p class="text-muted small mb-0">ğŸ”’ Page Protected by <code style="color: #e61eac;">SessionRequiredMixin</code> class</p>
                        </div>
                    </div>
                </a>
            </div>
            <div class="col-md-6 mb-2 d-flex flex-column">
                <a href="{% url 'demo_app:drf' %}" class="card-link">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">ğŸ”Œ Django REST Framework (DRF)</h5>
                            <p class="card-text">Demonstrates DRF authentication classes for API endpoint protection.</p>
                            <p class="text-muted small mb-0">ğŸ”’ Page Protected by <code style="color: #e61eac;">SessionRequiredMixin</code> class</p>
                        </div>
                    </div>
                </a>
            </div>
        </div>
        <div class="feature-list mt-4">
            <h3>ğŸ¯ What This App Demonstrates</h3>
            <ul>
                <li>âœ… Session-based auth with rolling sessions & token refresh</li>
                <li>âœ… JWT bearer token authentication for APIs</li>
                <li>âœ… Function decorators and CBV mixins for Django views</li>
                <li>âœ… DRF authentication classes for REST API endpoints</li>
                <li>âœ… Template context processor for Wristband user and tenant data</li>
                <li>âœ… Authentication backend for syncing to Django User model</li>
                <li>âœ… CSRF protection for forms and AJAX</li>
                <li>âœ… Override Django's admin auth to use Wristband instead of username/password</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}
